# Coupang Agent V2

Selenium + undetected-chromedriverë¥¼ ì‚¬ìš©í•œ ì¿ íŒ¡ ìë™í™” íƒì§€ í…ŒìŠ¤íŠ¸ ë„êµ¬

## ğŸ¯ ì£¼ìš” ê¸°ëŠ¥

- âœ… **Chrome 127~144 ë²„ì „ ì§€ì›** (18ê°œ Stable ë²„ì „)
- âœ… **Chrome Beta/Dev/Canary ì±„ë„ ì§€ì›** (3ê°œ ì±„ë„)
- âœ… **undetected-chromedriver** - ìë™í™” íƒì§€ ìš°íšŒ
- âœ… **TLS í•‘ê±°í”„ë¦°íŒ… ìš°íšŒ** - ë²„ì „ë³„ ë‹¤ì–‘ì„± (ì´ 21ê°œ ë²„ì „)
- âœ… **ë¹Œë“œ ë²ˆí˜¸ ë‹¤ì–‘ì„±** - Stable vs ì±„ë„ ë¹Œë“œ ë²ˆí˜¸ ì°¨ì´
- âœ… **VPN í†µí•©** - IP ìš°íšŒ (ë‹¤ì¤‘ VPN ì„œë²„ ì§€ì›)
- âœ… **ë²„ì „ë³„ í”„ë¡œí•„ ë¶„ë¦¬** - ì¿ í‚¤/ì„¸ì…˜/ë¡œì»¬ìŠ¤í† ë¦¬ì§€
- âœ… **ê³µìœ  ìºì‹œ ì‹œìŠ¤í…œ** - ë””ìŠ¤í¬ ê³µê°„ 70% ì ˆì•½
- âœ… **72ì‹œê°„ ë¯¸ì‚¬ìš© ìºì‹œ ìë™ ì •ë¦¬**
- âœ… **í•œêµ­ì–´ ë¸Œë¼ìš°ì € ì„¤ì •**
- âœ… **1920x1080 ê³ ì • viewport**
- âœ… **http2_protocol_error íƒì§€**

## ğŸ“¦ ì„¤ì¹˜

### âš¡ ìë™ ì„¤ì¹˜ (ê¶Œì¥)

**ìš°ë¶„íˆ¬ 22.04 LTSì—ì„œ í•œ ë²ˆì— ëª¨ë“  ì˜ì¡´ì„± ì„¤ì¹˜:**

```bash
# ì €ì¥ì†Œ í´ë¡ 
git clone https://github.com/service0427/rank_screenshot.git
cd rank_screenshot

# ìë™ ì„¤ì¹˜ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
./setup.sh
```

**ì„¤ì¹˜ë˜ëŠ” í•­ëª©:**
- âœ… Python 3.10+ ë° pip
- âœ… í•„ìˆ˜ ì‹œìŠ¤í…œ ë¼ì´ë¸ŒëŸ¬ë¦¬ (Chrome ì‹¤í–‰ìš©)
- âœ… Python íŒ¨í‚¤ì§€ (undetected-chromedriver, selenium, Pillow, requests)
- âœ… Chrome 130 (êµ¬ë²„ì „ TLS ëŒ€í‘œ)
- âœ… Chrome 144 (ìµœì‹  ë²„ì „)
- âœ… ë””ë ‰í† ë¦¬ êµ¬ì¡° ìƒì„±
- âœ… ê¶Œí•œ ì„¤ì •

**ì„¤ì¹˜ í›„ ë°”ë¡œ í…ŒìŠ¤íŠ¸:**
```bash
python3 agent.py --version 134 --close
```

---

### ğŸ”§ ìˆ˜ë™ ì„¤ì¹˜ (ì„ íƒì‚¬í•­)

<details>
<summary>ìˆ˜ë™ ì„¤ì¹˜ ê°€ì´ë“œ ë³´ê¸° (í´ë¦­)</summary>

#### 1. Chrome ë²„ì „ ì„¤ì¹˜

```bash
# Chrome 130, 144 ìë™ ì„¤ì¹˜
./install-chrome-versions.sh
```

ìŠ¤í¬ë¦½íŠ¸ëŠ” ìë™ìœ¼ë¡œ ë‘ ê°€ì§€ Chrome ë²„ì „ì„ ì„¤ì¹˜í•©ë‹ˆë‹¤:
- **Chrome 130**: êµ¬ë²„ì „ TLS (127-130 ëŒ€í‘œ)
- **Chrome 144**: ìµœì‹  ë²„ì „ (131+ ëŒ€í‘œ)

ì‹¤í–‰í•˜ë©´ ê¸°ì¡´ í´ë”ë¥¼ í™•ì¸í•˜ê³  ì—†ëŠ” ë²„ì „ë§Œ ìë™ìœ¼ë¡œ ë‹¤ìš´ë¡œë“œ ë° ì„¤ì¹˜í•©ë‹ˆë‹¤.

#### 2. Python íŒ¨í‚¤ì§€ ì„¤ì¹˜

VPN ì‚¬ìš©ì„ ìœ„í•´ ì‹œìŠ¤í…œ ì „ì—­ ì„¤ì¹˜ í•„ìš”:

```bash
sudo pip3 install -r requirements.txt
```

ë˜ëŠ” ê°œë³„ ì„¤ì¹˜:
```bash
sudo pip3 install undetected-chromedriver selenium Pillow requests
```

**ì°¸ê³ **: `--user` í”Œë˜ê·¸ë¥¼ ì‚¬ìš©í•˜ë©´ VPN í™˜ê²½ì—ì„œ íŒ¨í‚¤ì§€ë¥¼ ì°¾ì§€ ëª»í•©ë‹ˆë‹¤.

#### 3. ê¶Œí•œ ì„¤ì • (VPN ì‚¬ìš© ì‹œ í•„ìˆ˜)

VPNê³¼ í•¨ê»˜ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ê¶Œí•œ ì„¤ì •ì´ í•„ìš”í•©ë‹ˆë‹¤:

```bash
# ê¶Œí•œ ì„¤ì • ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
./setup-permissions.sh
```

ì´ ìŠ¤í¬ë¦½íŠ¸ëŠ” ë‹¤ìŒì„ ì„¤ì •í•©ë‹ˆë‹¤:
- Agent ë””ë ‰í† ë¦¬ ì½ê¸° ê¶Œí•œ
- Browser profiles ì“°ê¸° ê¶Œí•œ
- ChromeDriver ìºì‹œ ì“°ê¸° ê¶Œí•œ
- Python íŒ¨í‚¤ì§€ ì½ê¸° ê¶Œí•œ

**ë°°í¬ ì‹œ ì£¼ì˜ì‚¬í•­:**
- ì„œë²„ í™˜ê²½ë§ˆë‹¤ ê²½ë¡œê°€ ë‹¤ë¥¼ ìˆ˜ ìˆìŒ
- VPN í´ë¼ì´ì–¸íŠ¸ ì„¤ì¹˜ í›„ ì‹¤í–‰ ê¶Œì¥
- ê¶Œí•œ ì˜¤ë¥˜ ë°œìƒ ì‹œ ì¬ì‹¤í–‰

</details>

## ğŸš€ ì‚¬ìš©ë²•

### ê°„í¸ ì‹¤í–‰ (ê¶Œì¥)

**`--version` ì—†ì´ ì‹¤í–‰í•˜ë©´ ìë™ìœ¼ë¡œ ë²„ì „ ì„ íƒ í”„ë¡¬í”„íŠ¸ í‘œì‹œ**:

```bash
# ê°€ì¥ ë§ì´ ì‚¬ìš©í•˜ëŠ” íŒ¨í„´
python3 agent.py --close                    # ë²„ì „ ì„ íƒ â†’ ìë™ ì¢…ë£Œ
python3 agent.py --vpn 0 --close            # VPN wg0 + ë²„ì „ ì„ íƒ â†’ ìë™ ì¢…ë£Œ
python3 agent.py --keyword "ê²Œì„"           # ë²„ì „ ì„ íƒ â†’ ê²Œì„ ê²€ìƒ‰

# --versionì´ ì—†ìœ¼ë©´ ìë™ìœ¼ë¡œ ë²„ì „ ë¦¬ìŠ¤íŠ¸ í‘œì‹œ
============================================================
ğŸ” Chrome ë²„ì „ ì„ íƒ
============================================================
â¤ 19. Chrome beta    â† ë§ˆì§€ë§‰ ì‚¬ìš© ë²„ì „
  20. Chrome dev
  21. Chrome canary

ì„ íƒ (1-21, Enter=ë§ˆì§€ë§‰ ì‚¬ìš©: beta): [Enter]
âœ“ ë§ˆì§€ë§‰ ì‚¬ìš© ë²„ì „ ì„ íƒ: Chrome beta
============================================================
```

**íŠ¹ì§•**:
- âœ… **21ê°œ Chrome ë²„ì „** ì¤‘ ì„ íƒ (Stable 18 + ì±„ë„ 3)
- âœ… **ë§ˆì§€ë§‰ ì‚¬ìš© ë²„ì „ ê¸°ì–µ** - Enterë§Œ ëˆ„ë¥´ë©´ ì´ì „ ë²„ì „ ì¬ì‚¬ìš©
- âœ… **â¤ í‘œì‹œ**ë¡œ ë§ˆì§€ë§‰ ì‚¬ìš© ë²„ì „ ê°•ì¡°
- âœ… **ë‹¤ë¥¸ ì˜µì…˜ ìœ ì§€** - `--vpn`, `--close`, `--keyword` ë“±ì€ ê·¸ëŒ€ë¡œ ì ìš©

**ì‚¬ìš© ì˜ˆì‹œ**:
```
============================================================
ğŸ¤– Selenium + undetected-chromedriver Interactive Mode
============================================================

ì‚¬ìš© ê°€ëŠ¥í•œ Chrome ë²„ì „:
   1. Chrome 127
   2. Chrome 128
   ...
  18. Chrome 144
â¤ 19. Chrome beta    â† ë§ˆì§€ë§‰ ì‚¬ìš© ë²„ì „
  20. Chrome dev
  21. Chrome canary

ì„ íƒ (1-21, Enter=ë§ˆì§€ë§‰ ì‚¬ìš©: beta): [Enter ì…ë ¥]
âœ“ ë§ˆì§€ë§‰ ì‚¬ìš© ë²„ì „ ì„ íƒ: Chrome beta

ê²€ìƒ‰ í‚¤ì›Œë“œ (ê¸°ë³¸: ë…¸íŠ¸ë¶): ê²Œì„
íƒì§€ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/N): n
```

### ëª…ë ¹í–‰ ì˜µì…˜ (ìë™í™”ìš©)

```bash
# íŠ¹ì • ë²„ì „ ì§€ì •
python3 agent.py --version 134
python3 agent.py --version beta

# í‚¤ì›Œë“œ ì§€ì •
python3 agent.py --version 134 --keyword "ê²Œì„"

# ìë™ ì¢…ë£Œ (3ì´ˆ í›„)
python3 agent.py --version 134 --close

# íƒì§€ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
python3 agent.py --version 134 --test-detection

# VPN ì‚¬ìš©
python3 agent.py --vpn 0 --version 127
python3 agent.py --vpn 1 --version beta
```

### VPN ì‚¬ìš©ë²•

VPNì„ ì‚¬ìš©í•˜ë©´ IP ìš°íšŒë¥¼ í†µí•´ ì°¨ë‹¨ëœ Chrome ë²„ì „(127-130)ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```bash
# VPN ì—†ì´ ì‹¤í–‰ (ë¡œì»¬ IP)
python3 agent.py --version 134

# VPN ì„œë²„ë¡œ ì‹¤í–‰ (IP ìš°íšŒ)
python3 agent.py --vpn 0 --version 127  # wg0/vpn0 ì‚¬ìš©
python3 agent.py --vpn 1 --version 127  # wg1/vpn1 ì‚¬ìš©
python3 agent.py --vpn 2 --version 128  # wg2/vpn2 ì‚¬ìš©
python3 agent.py --vpn 3 --version beta # wg3/vpn3 ì‚¬ìš©
```

**VPN ì˜µì…˜**:
- `--vpn` ì˜µì…˜ ì—†ìŒ: ë¡œì»¬ IP / VPN ì‚¬ìš© ì•ˆ í•¨ (ê¸°ë³¸ê°’)
- `--vpn 0`: wg0/vpn0 ì‚¬ìš© (ì²« ë²ˆì§¸ VPN ì„œë²„)
- `--vpn 1`: wg1/vpn1 ì‚¬ìš© (ë‘ ë²ˆì§¸ VPN ì„œë²„)
- `--vpn N`: wgN/vpnN ì‚¬ìš© (N+1ë²ˆì§¸ VPN ì„œë²„)

**VPN ì„¤ì¹˜**:
VPN í´ë¼ì´ì–¸íŠ¸ê°€ í•„ìš”í•©ë‹ˆë‹¤: https://github.com/service0427/vpn

### ì¢…ë£Œ ë°©ë²•

ë¸Œë¼ìš°ì € ì‹¤í–‰ ì¤‘ ë‹¤ìŒ ë°©ë²•ìœ¼ë¡œ ì¢…ë£Œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
- **Enter í‚¤**: í„°ë¯¸ë„ì—ì„œ Enterë§Œ ëˆ„ë¥´ë©´ ì¢…ë£Œ
- **Ctrl+C**: í‚¤ë³´ë“œ ì¸í„°ëŸ½íŠ¸ë¡œ ì¢…ë£Œ
- **ì°½ ë‹«ê¸°**: ë¸Œë¼ìš°ì € ì°½ì„ ì§ì ‘ ë‹«ê¸°

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
agent/
â”œâ”€â”€ agent.py                      # ë©”ì¸ ì‹¤í–‰ íŒŒì¼
â”œâ”€â”€ multi_browser_manager.py      # ë¸Œë¼ìš°ì € ë²„ì „ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬
â”œâ”€â”€ install-chrome-versions.sh    # Chrome ì„¤ì¹˜ ìŠ¤í¬ë¦½íŠ¸ (Stable + ì±„ë„ í†µí•©)
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â””â”€â”€ browser_core_uc.py    # undetected-chromedriver ì½”ì–´
â”‚   â”œâ”€â”€ modules/
â”‚   â”‚   â””â”€â”€ coupang_handler_selenium.py  # ì¿ íŒ¡ í•¸ë“¤ëŸ¬
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â””â”€â”€ human_behavior_selenium.py   # ì‚¬ëŒ í–‰ë™ ì‹œë®¬ë ˆì´ì…˜
â”‚   â””â”€â”€ constants.py              # ìƒìˆ˜ ì •ì˜
â”œâ”€â”€ chrome-version/               # Chrome ë°”ì´ë„ˆë¦¬ (127~144)
â””â”€â”€ browser-profiles/             # ë¸Œë¼ìš°ì € í”„ë¡œí•„
    â”œâ”€â”€ chrome-127/               # ë²„ì „ë³„ í”„ë¡œí•„
    â”œâ”€â”€ chrome-134/
    â””â”€â”€ shared-cache/             # ê³µìœ  ìºì‹œ (500MB ì œí•œ)
```

## ğŸ”§ multi_browser_manager.py ì—­í• 

`multi_browser_manager.py`ëŠ” **ë¸Œë¼ìš°ì € ë²„ì „ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬**ì…ë‹ˆë‹¤:

**ì£¼ìš” ê¸°ëŠ¥**:
- âœ… **ìë™ ë²„ì „ ìŠ¤ìº”**: `chrome-version/` ë””ë ‰í† ë¦¬ì—ì„œ ì„¤ì¹˜ëœ Chrome ë²„ì „ ìë™ ê°ì§€
- âœ… **ëœë¤ ë²„ì „ ì„ íƒ**: 21ê°œ ë²„ì „(Stable 18 + ì±„ë„ 3) ì¤‘ ëœë¤ ì„ íƒ
- âœ… **ê·¸ë£¹ë³„ ì„ íƒ**: old(127-130), new(131-141), latest(142-144), channels(beta/dev/canary)
- âœ… **ë‹¤ì–‘í•œ ë¸Œë¼ìš°ì € ì§€ì›**: nodriver, Selenium, Playwright ì˜ˆì œ ì½”ë“œ í¬í•¨

**ì‚¬ìš© ì˜ˆì‹œ**:
```python
from multi_browser_manager import BrowserVersionManager

# ë²„ì „ ê´€ë¦¬ì ìƒì„±
manager = BrowserVersionManager()

# ëœë¤ Chrome ì„ íƒ (Stable + ì±„ë„ í¬í•¨)
version, chrome_path = manager.get_random_chrome()

# ê·¸ë£¹ë³„ ì„ íƒ
version, path = manager.get_chrome_group("old")      # 127-130 ì¤‘ ëœë¤
version, path = manager.get_chrome_group("channels")  # Beta/Dev/Canary ì¤‘ ëœë¤

# íŠ¹ì • ë²„ì „ ê°€ì ¸ì˜¤ê¸°
chrome_path = manager.get_chrome("134")
chrome_path = manager.get_chrome("beta")
```

## ğŸ’¡ ì£¼ìš” ê¸°ëŠ¥ ì„¤ëª…

### 1. ë²„ì „ë³„ í”„ë¡œí•„ ë¶„ë¦¬

ê° Chrome ë²„ì „ë§ˆë‹¤ ë…ë¦½ì ì¸ í”„ë¡œí•„ì„ ì‚¬ìš©í•©ë‹ˆë‹¤:
- **ì¿ í‚¤**: ë²„ì „ë³„ ë…ë¦½
- **ì„¸ì…˜ ìŠ¤í† ë¦¬ì§€**: ë²„ì „ë³„ ë…ë¦½
- **ë¡œì»¬ ìŠ¤í† ë¦¬ì§€**: ë²„ì „ë³„ ë…ë¦½
- **ìºì‹œ**: ëª¨ë“  ë²„ì „ì´ ê³µìœ  (íŠ¸ë˜í”½ ì ˆì•½)

### 2. ê³µìœ  ìºì‹œ ì‹œìŠ¤í…œ

```
browser-profiles/
â”œâ”€â”€ chrome-127/     (3.6MB - í”„ë¡œí•„ë§Œ)
â”œâ”€â”€ chrome-134/     (3.7MB - í”„ë¡œí•„ë§Œ)
â””â”€â”€ shared-cache/   (15MB - ê³µìœ  ìºì‹œ)
```

**ì ˆì•½ íš¨ê³¼**:
- ë¹„ê³µìœ : ~216MB (18 Ã— 12MB)
- ê³µìœ : ~78MB (15MB + 18 Ã— 3.5MB)
- **ì•½ 70% ì ˆì•½**

### 3. ìë™ ìºì‹œ ì •ë¦¬

72ì‹œê°„ ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•Šì€ ìºì‹œ íŒŒì¼ì„ ìë™ìœ¼ë¡œ ì‚­ì œí•˜ì—¬ ë””ìŠ¤í¬ ê³µê°„ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.

### 4. í•œêµ­ì–´ í™˜ê²½ ì„¤ì •

- `navigator.language`: ko-KR
- Accept-Language í—¤ë”: ko-KR,ko;q=0.9
- ë²ˆì—­ ì œì•ˆ ë¹„í™œì„±í™”

### 5. Viewport ê³ ì •

ë‚´ë¶€ ì½˜í…ì¸  ì˜ì—­ì„ 1920x1080ìœ¼ë¡œ ê³ ì •í•˜ì—¬ ì¼ê´€ëœ ë Œë”ë§ì„ ì œê³µí•©ë‹ˆë‹¤.

## ğŸ”§ ê¸°ìˆ  ìŠ¤íƒ

- **Python 3.12+**
- **Selenium 4.x**
- **undetected-chromedriver 3.x**
- **Chrome for Testing 127~144**

## ğŸ“Š ì‹¤í–‰ ì˜ˆì‹œ

```bash
$ python3 agent.py --version 134 --keyword "ë…¸íŠ¸ë¶" --close

============================================================
ğŸ¤– Coupang Agent V2 - Selenium + undetected-chromedriver
============================================================
Instance ID: 1
Keyword: ë…¸íŠ¸ë¶
Chrome Version: 134
Detection Test: False
============================================================

ğŸ§¹ Cleaning cache older than 72 hours...
   âœ“ No old cache to clean
ğŸš€ Launching Chrome 134 with undetected-chromedriver...
   Path: /home/tech/agent/chrome-version/134/chrome-linux64/chrome
   Profile: /home/tech/agent/browser-profiles/chrome-134
   âœ“ Chrome launched (undetected-chromedriver)
   âœ“ Anti-detection: ENABLED by default

============================================================
ğŸ” Browser Version Information
============================================================
   Chrome Version: 134.0.6998.165
   â””â”€ Major: 134 | Minor: 0 | Build: 6998 | Patch: 165
   User Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36
   Language: ko-KR
   Languages: ['ko-KR']
   Viewport: 1920x1080
============================================================

============================================================
ğŸŒ Checking IP Address
============================================================
   Public IP: 112.161.221.193
============================================================

ğŸ§¹ Clearing cookies, session & local storage (cache preserved)...
   âœ“ All storage cleared (cache preserved)
ğŸ  Navigating to Coupang home...
   âœ“ Home page loaded
ğŸ” Searching for: ë…¸íŠ¸ë¶
   âœ“ Search script executed for: ë…¸íŠ¸ë¶
   âœ“ Search completed

ğŸ” Checking for errors...

============================================================
âœ… SUCCESS: No errors detected!
============================================================
Current URL: https://www.coupang.com/np/search?component=&q=ë…¸íŠ¸ë¶&traceId=...
Status: {'execution_status': 'RESULTS_LOADED', 'action_status': 'SUCCESS', ...}
============================================================
```

## ğŸ“ ë¼ì´ì„¼ìŠ¤

MIT License

---

## ğŸ¯ ìˆœìˆ˜ ì˜¤ë¦¬ì§€ë„ ì›Œí¬í”Œë¡œìš° (2025-11-03 ì—…ë°ì´íŠ¸)

**Edit ëª¨ë“œ ì™„ì „ ì œê±° ì™„ë£Œ**

### ì›Œí¬í”Œë¡œìš°

```
Main â†’ Search â†’ Match â†’ Highlight â†’ Watermark â†’ Capture â†’ Upload
```

### í•µì‹¬ ë³€ê²½ì‚¬í•­

1. **ì½”ë“œ í¬ê¸° ê°ì†Œ**: 1,485 ë¼ì¸ â†’ 748 ë¼ì¸ (50% ê°ì†Œ)
2. **Edit ëª¨ë“œ ì œê±°**: ìˆœìœ„ ì¡°ì‘, í˜ì´ì§€ ì´ë™, DOM êµì²´ ê¸°ëŠ¥ ì‚­ì œ
3. **ì›Œí„°ë§ˆí¬ ë‹¨ìˆœí™”**: 
   - ì¿ íŒ¡ ì›ë³¸ (1~10ìœ„) ìœ ì§€
   - ì»¤ìŠ¤í…€ ì›Œí„°ë§ˆí¬ (11ìœ„ ì´ìƒ) ì¶”ê°€
   - íƒ€ê²Ÿ ìƒí’ˆ êµ¬ë¶„ ì œê±°

### ì£¼ìš” ëª¨ë“ˆ

| ëª¨ë“ˆ | ì±…ì„ | ìœ„ì¹˜ |
|------|------|------|
| `search_workflow.py` | ì›Œí¬í”Œë¡œìš° ê´€ë¦¬ | `lib/workflows/` |
| `product_finder.py` | ìƒí’ˆ ê²€ìƒ‰ ë° ë§¤ì¹­ | `lib/modules/` |
| `watermark_display.py` | ì›Œí„°ë§ˆí¬ í‘œì‹œ | `lib/modules/rank/` |
| `screenshot_processor.py` | ìº¡ì²˜ ë° ì—…ë¡œë“œ | `lib/utils/` |

### ì¤‘ìš” ë²„ê·¸ ìˆ˜ì • (2025-11-03)

**Dictionary ë³‘í•© ìˆœì„œ ë²„ê·¸** - `product_finder.py:169-175`

- **ë¬¸ì œ**: `**url_params`ì˜ ìœ„ì¹˜ì— ë”°ë¼ rank ê°’ì´ ì˜ëª» ì €ì¥ë¨
- **ì¦ìƒ**: debug-overlay ìˆœìœ„ê°€ 1,2,3,6,7,8... (4,5 ê±´ë„ˆë›°ì–´ì§)
- **í•´ê²°**: ì˜¬ë°”ë¥¸ ìˆœì„œë¡œ ë³€ê²½ (`**url_params` ë¨¼ì €, `"rank": organic_rank` ë‚˜ì¤‘)
- **ìƒì„¸**: ì½”ë“œì— ì£¼ì„ìœ¼ë¡œ ìƒì„¸ ì„¤ëª… ì¶”ê°€

### ë””ë²„ê¹…

**ë””ë²„ê·¸ íŒŒì¼ ìƒì„±**:
```bash
# ë””ë²„ê·¸ íŒŒì¼ ìœ„ì¹˜
/home/tech/agent/debug_logs/debug_overlay_*.json
```

**í™œì„±í™”**: `Config.ENABLE_DEBUG_OVERLAY = True` (ê¸°ë³¸ê°’)

**ìš©ë„**: ì½˜ì†” ë¡œê·¸ë§Œìœ¼ë¡œ ë°œê²¬í•  ìˆ˜ ì—†ëŠ” ë²„ê·¸ ì¶”ì 

---

## ğŸ” VPN í‚¤ í’€ ì‹œìŠ¤í…œ

### ê°œìš”

**VPN í‚¤ í’€ (VPN Key Pool)**ì€ ë‹¤ì¤‘ ì›Œì»¤ í™˜ê²½ì—ì„œ VPN ìì›ì„ ë™ì ìœ¼ë¡œ í• ë‹¹/ê´€ë¦¬í•˜ëŠ” ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

### ì‹œìŠ¤í…œ ì‚¬ì–‘

| í•­ëª© | ì‚¬ì–‘ |
|------|------|
| VPN ì„œë²„ | 5ê°œ |
| ì„œë²„ë‹¹ ë™ì‹œ ì ‘ì† | 10ê°œ |
| ì´ VPN ìš©ëŸ‰ | 50ê°œ |
| ì‹œìŠ¤í…œ ì‚¬ìš©ì | vpn-worker-1 ~ vpn-worker-12 |
| ì›Œì»¤ ìµœëŒ€ ì´ë¡ ì¹˜ | 20ê°œ |
| **ê¶Œì¥ ì›Œì»¤ ìˆ˜** | **12-16ê°œ** |

### ì‹¤í–‰ ë°©ë²•

#### run_workers.pyë¡œ ë©€í‹° ì›Œì»¤ ì‹¤í–‰

```bash
# 12ê°œ ì›Œì»¤ë¡œ ì‘ì—… API ëª¨ë“œ ì‹¤í–‰ (VPN í‚¤ í’€ ìë™ í• ë‹¹)
python3 run_workers.py --work-api --max-workers 12

# 16ê°œ ì›Œì»¤ë¡œ ì‹¤í–‰ (ê¶Œì¥ ìµœëŒ€)
python3 run_workers.py --work-api --max-workers 16

# íŠ¹ì • Chrome ë²„ì „ ì§€ì •
python3 run_workers.py --work-api --max-workers 12 --version 130
```

### ì£¼ìš” íŠ¹ì§•

- âœ… **ë™ì  VPN í• ë‹¹**: ì›Œì»¤ë³„ë¡œ VPN í‚¤ë¥¼ ìë™ í• ë‹¹/ë°˜ë‚©
- âœ… **ì •ì±… ë¼ìš°íŒ…**: UID ê¸°ë°˜ ë¼ìš°íŒ…ìœ¼ë¡œ ë©”ì¸ ì´ë”ë„· ë³´ì¡´
- âœ… **í”„ë¡œì„¸ìŠ¤ ê²©ë¦¬**: ê° ì›Œì»¤ëŠ” ë…ë¦½ì ì¸ ì‹œìŠ¤í…œ ì‚¬ìš©ìë¡œ ì‹¤í–‰
- âœ… **í”„ë¡œí•„ ë¶„ë¦¬**: ì›Œì»¤ë³„ ë…ë¦½ì ì¸ Chrome í”„ë¡œí•„
- âœ… **ChromeDriver ê²©ë¦¬**: ì‚¬ìš©ìë³„ ChromeDriver ê²½ë¡œë¡œ ì¶©ëŒ ë°©ì§€

### ì•„í‚¤í…ì²˜

```
run_workers.py
    â†“
Worker Thread 1-N
    â†“
VPNConnection (VPN í‚¤ í• ë‹¹)
    â†“
WireGuard (wg-vpn-pool-N)
    â†“
Policy Routing (UID â†’ Table)
    â†“
sudo -u vpn-worker-N python3 agent.py
    â†“
Chrome (ë…ë¦½ í”„ë¡œí•„)
```

### í…ŒìŠ¤íŠ¸ ê²€ì¦ (2025-11-06)

**50ê°œ ì›Œì»¤ í…ŒìŠ¤íŠ¸**:
- VPN í‚¤ í• ë‹¹: 50/50 (100%)
- VPN ì—°ê²°: 50/50 (100%)
- ì •ì±… ë¼ìš°íŒ…: 50/50 (100%)
- ë¸Œë¼ìš°ì € ì‹¤í–‰: 12/50 (ì‹œìŠ¤í…œ ì‚¬ìš©ì ì œì•½)
- ë©”ì¸ ì´ë”ë„·: âœ… ë³´ì¡´ í™•ì¸

### ê¶Œì¥ ìš´ì˜ ë°©ì‹

| ìš©ë„ | ì›Œì»¤ ìˆ˜ | íŠ¹ì§• |
|------|---------|------|
| ê°œë°œ/í…ŒìŠ¤íŠ¸ | 1-2ê°œ | ë¹ ë¥¸ ë””ë²„ê¹… |
| ì†Œê·œëª¨ ìš´ì˜ | 4-8ê°œ | ì•ˆì •ì , ëª¨ë‹ˆí„°ë§ ì‰¬ì›€ |
| **ëŒ€ê·œëª¨ ìš´ì˜** | **12-16ê°œ** | **ê¶Œì¥ ìµœëŒ€** |
| ì´ë¡ ì  ìµœëŒ€ | 20ê°œ | í•˜ë“œì›¨ì–´ ì—¬ìœ  í•„ìš” |

**ì¤‘ìš”**: 50ê°œëŠ” ì‹œìŠ¤í…œ ì‚¬ìš©ì ë¶€ì¡± ë° ë¦¬ì†ŒìŠ¤ ê³¼ë¶€í•˜ë¡œ ë¶ˆê°€

### ìƒì„¸ ë¬¸ì„œ

- **CLAUDE.md**: VPN í‚¤ í’€ ìƒì„¸ ì•„í‚¤í…ì²˜ ë° ë¬¸ì œ í•´ê²° ê°€ì´ë“œ

---

## ğŸ“– ë¬¸ì„œ

- **CLAUDE.md**: Claude Code ì‘ì—… ê°€ì´ë“œ ë° ê´€ë¦¬ ì›ì¹™
- **README.md**: í”„ë¡œì íŠ¸ ê°œìš” ë° ë¹ ë¥¸ ì‹œì‘ (ì´ ë¬¸ì„œ)

**ì¤‘ìš”**: í•¨ìˆ˜/ë³€ìˆ˜ ìš©ë„ëŠ” ì½”ë“œì— ì§ì ‘ ì£¼ì„ìœ¼ë¡œ ì‘ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

---
